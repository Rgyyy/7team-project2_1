module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},62212,a=>{a.n(a.i(66114))},12964,a=>{"use strict";a.s(["logoutUser",()=>d]);var b=a.i(37936),c=a.i(5246);async function d(){try{return(await (0,c.cookies)()).delete("token"),console.log("로그아웃 성공"),{success:!0}}catch(a){return console.error("로그아웃 에러:",a),{success:!1,error:"로그아웃 중 오류가 발생했습니다."}}}(0,a.i(13095).ensureServerEntryExports)([d]),(0,b.registerServerReference)(d,"00b7a57c14b2684975b2c912dfa8f62e85d5d7f389",null)},874,(a,b,c)=>{b.exports=a.x("buffer",()=>require("buffer"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},66518,a=>{"use strict";a.s(["prisma",()=>c]);var b=a.i(29173);let c=a.g.prisma||new b.PrismaClient({log:["query","error","warn"]})},95950,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/login/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/login/page.tsx <module evaluation>","default")},99757,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/login/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/login/page.tsx","default")},16594,a=>{"use strict";a.i(95950);var b=a.i(99757);a.n(b)},66701,a=>{"use strict";a.s(["00b7a57c14b2684975b2c912dfa8f62e85d5d7f389",()=>i.logoutUser,"6061d53a51fcdc6bdce578a9776d8bfbde70a413a1",()=>h],66701),a.s([],68761);var b=a.i(12964),c=a.i(37936),d=a.i(66518),e=a.i(72849),f=a.i(55429),g=a.i(5246);async function h(a,b){try{let a=b.get("userId"),c=b.get("userPassword"),h=b.get("gpsLocation"),i=b.get("deviceInfo");if(!a||!c)return{error:"아이디와 비밀번호를 모두 입력해주세요."};let j=await d.prisma.user_data.findUnique({where:{user_id:a}});if(!j)return{error:"존재하지 않는 사용자입니다."};if("1"===j.user_state)return{error:"탈퇴한 회원입니다."};if(!await e.default.compare(c,j.user_password))return{error:"비밀번호가 일치하지 않습니다."};let k=f.default.sign({userId:j.user_id},process.env.JWT_SECRET,{expiresIn:"24h"});(await (0,g.cookies)()).set("token",k,{httpOnly:!0,secure:!1,sameSite:"lax",path:"/",maxAge:86400});let l=await (0,g.headers)(),m=l.get("x-forwarded-for")||l.get("x-real-ip")||l.get("x-client-ip")||l.get("cf-connecting-ip")||l.get("remote-addr")||"unknown";m.includes(",")&&(m=m.split(",")[0].trim()),("::1"===m||"127.0.0.1"===m)&&(m="localhost");let n=l.get("user-agent")||"unknown";return await d.prisma.login_record.create({data:{user_id:j.user_id,login_time:new Date,login_location:h||null,login_ip:m,login_platform:i||n}}),{success:!0}}catch(a){return console.error("로그인 에러:",a),{error:"로그인 중 오류가 발생했습니다."}}}(0,a.i(13095).ensureServerEntryExports)([h]),(0,c.registerServerReference)(h,"6061d53a51fcdc6bdce578a9776d8bfbde70a413a1",null),a.i(68761);var i=b}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b31f9dd2._.js.map