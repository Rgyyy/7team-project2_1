{"version":3,"sources":["turbopack:///[project]/src/app/activities/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface Activity {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  date: string;\r\n  time: string;\r\n  address: string;\r\n  duration: number;\r\n  maxParticipants: number;\r\n  participants: number;\r\n  difficultyLevel: string;\r\n  price: number;\r\n  organizer: string;\r\n  createdAt: string;\r\n  category: {\r\n    id: string;\r\n    name: string;\r\n    icon?: string;\r\n  };\r\n  location: {\r\n    id: string;\r\n    name: string;\r\n  };\r\n}\r\n\r\ninterface PaginationData {\r\n  activities: Activity[];\r\n  totalPages: number;\r\n  currentPage: number;\r\n  totalCount: number;\r\n}\r\n\r\nexport default function ActivitiesPage() {\r\n  const router = useRouter();\r\n  const [activities, setActivities] = useState<Activity[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [categoryFilter, setCategoryFilter] = useState('전체');\r\n  const [locationFilter, setLocationFilter] = useState('전국');\r\n  const [sortBy, setSortBy] = useState('latest');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [totalCount, setTotalCount] = useState(0);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchInput, setSearchInput] = useState('');\r\n  const [currentUserId, setCurrentUserId] = useState<string | null>(null);\r\n  const itemsPerPage = 9;\r\n  const observerTarget = useRef<HTMLDivElement>(null);\r\n  const newPageMarkerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // 모바일 감지\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth < 768);\r\n    };\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // 현재 사용자 확인\r\n  useEffect(() => {\r\n    const checkCurrentUser = async () => {\r\n      try {\r\n        const response = await fetch('/api/auth/current-user');\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.userId) {\r\n            setCurrentUserId(data.userId);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error checking user:', error);\r\n      }\r\n    };\r\n    \r\n    checkCurrentUser();\r\n  }, []);\r\n\r\n  // 데이터 fetch\r\n  useEffect(() => {\r\n    fetchActivities(currentPage > 1 && isMobile);\r\n  }, [currentPage, categoryFilter, locationFilter, sortBy, searchQuery]);\r\n\r\n  // 필터 변경 시 초기화\r\n  useEffect(() => {\r\n    if (currentPage === 1) {\r\n      setActivities([]);\r\n    }\r\n  }, [categoryFilter, locationFilter, sortBy, searchQuery]);\r\n\r\n  const fetchActivities = async (isLoadMore: boolean) => {\r\n    if (isLoadMore) {\r\n      setLoadingMore(true);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    try {\r\n      const params = new URLSearchParams({\r\n        page: currentPage.toString(),\r\n        limit: itemsPerPage.toString(),\r\n        sortBy: sortBy,\r\n      });\r\n\r\n      if (categoryFilter !== '전체') {\r\n        params.append('category', categoryFilter);\r\n      }\r\n      if (locationFilter !== '전국') {\r\n        params.append('location', locationFilter);\r\n      }\r\n      if (searchQuery.trim()) {\r\n        params.append('search', searchQuery.trim());\r\n      }\r\n\r\n      const response = await fetch(`/api/activities?${params.toString()}`);\r\n      const data: PaginationData = await response.json();\r\n      \r\n      if (data.activities && Array.isArray(data.activities)) {\r\n        if (isMobile && isLoadMore && currentPage > 1) {\r\n          setActivities(prev => [...prev, ...data.activities]);\r\n          \r\n          setTimeout(() => {\r\n            if (newPageMarkerRef.current) {\r\n              newPageMarkerRef.current.scrollIntoView({ \r\n                behavior: 'smooth', \r\n                block: 'start'\r\n              });\r\n            }\r\n          }, 150);\r\n        } else {\r\n          setActivities(data.activities);\r\n        }\r\n        setTotalPages(data.totalPages || 1);\r\n        setTotalCount(data.totalCount || 0);\r\n      } else {\r\n        setActivities([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching activities:\", error);\r\n      setActivities([]);\r\n    } finally {\r\n      setLoading(false);\r\n      setLoadingMore(false);\r\n    }\r\n  };\r\n\r\n  // 무한 스크롤 (모바일 전용)\r\n  useEffect(() => {\r\n    if (!isMobile) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting && !loadingMore && currentPage < totalPages) {\r\n          setCurrentPage(prev => prev + 1);\r\n        }\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    const currentTarget = observerTarget.current;\r\n    if (currentTarget) {\r\n      observer.observe(currentTarget);\r\n    }\r\n\r\n    return () => {\r\n      if (currentTarget) {\r\n        observer.unobserve(currentTarget);\r\n      }\r\n    };\r\n  }, [isMobile, loadingMore, currentPage, totalPages]);\r\n\r\n  const handlePageChange = (page: number) => {\r\n    setCurrentPage(page);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleCategoryChange = (category: string) => {\r\n    setCategoryFilter(category);\r\n    setCurrentPage(1);\r\n    setActivities([]);\r\n  };\r\n\r\n  const handleLocationChange = (location: string) => {\r\n    setLocationFilter(location);\r\n    setCurrentPage(1);\r\n    setActivities([]);\r\n  };\r\n\r\n  const handleSortChange = (sort: string) => {\r\n    setSortBy(sort);\r\n    setCurrentPage(1);\r\n    setActivities([]);\r\n  };\r\n\r\n  const handleSearchSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSearchQuery(searchInput);\r\n    setCurrentPage(1);\r\n    setActivities([]);\r\n  };\r\n\r\n  const handleCreateActivity = (e: React.MouseEvent) => {\r\n    if (!currentUserId) {\r\n      e.preventDefault();\r\n      alert('로그인이 필요합니다.');\r\n      router.push('/login');\r\n    }\r\n  };\r\n\r\n  const categories = ['전체', '운동', '요리', '독서', '사진', '음악', '미술', '언어', '게임', '여행', '그외'];\r\n  const locations_part1 = ['전국', '서울', '인천', '대전', '대구', '광주', '울산', '부산', '세종'];\r\n  const locations_part2 = ['경기도', '강원도', '충청북도', '충청남도', '전라북도', '전라남도', '경상북도', '경상남도', '제주도'];\r\n\r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    const maxVisible = 5;\r\n\r\n    if (totalPages <= maxVisible) {\r\n      for (let i = 1; i <= totalPages; i++) {\r\n        pages.push(i);\r\n      }\r\n    } else {\r\n      if (currentPage <= 3) {\r\n        for (let i = 1; i <= maxVisible; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else if (currentPage >= totalPages - 2) {\r\n        for (let i = totalPages - maxVisible + 1; i <= totalPages; i++) {\r\n          pages.push(i);\r\n        }\r\n      } else {\r\n        for (let i = currentPage - 2; i <= currentPage + 2; i++) {\r\n          pages.push(i);\r\n        }\r\n      }\r\n    }\r\n\r\n    return pages;\r\n  };\r\n\r\n  if (loading && activities.length === 0) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-xl text-gray-600\">로딩 중...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen py-12\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">모임 게시판</h1>\r\n          <p className=\"text-gray-600\">\r\n            다양한 취미 활동 모임을 찾아보세요 \r\n            {totalCount > 0 && (\r\n              <span className=\"ml-2 text-purple-600 font-medium\">\r\n                (총 {totalCount}개)\r\n              </span>\r\n            )}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow-sm p-4 mb-6\">\r\n          <div className=\"mb-4\">\r\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-2\">취미 카테고리</h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {categories.map((cat) => (\r\n                <button\r\n                  key={cat}\r\n                  onClick={() => handleCategoryChange(cat)}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                    categoryFilter === cat\r\n                      ? \"bg-purple-600 text-white\"\r\n                      : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                  }`}\r\n                >\r\n                  {cat}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <h3 className=\"text-sm font-semibold text-gray-700 mb-2\">원하는 지역</h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {locations_part1.map((loc) => (\r\n                <button\r\n                  key={loc}\r\n                  onClick={() => handleLocationChange(loc)}\r\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                    locationFilter === loc\r\n                      ? 'bg-purple-600 text-white'\r\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                >\r\n                  {loc}\r\n                </button>\r\n              ))}\r\n              \r\n              <div className=\"flex flex-wrap gap-2 w-full mt-2\">\r\n                {locations_part2.map((loc) => (\r\n                  <button\r\n                    key={loc}\r\n                    onClick={() => handleLocationChange(loc)}\r\n                    className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\r\n                      locationFilter === loc\r\n                        ? 'bg-purple-600 text-white'\r\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                    }`}\r\n                  >\r\n                    {loc}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between pt-4 border-t border-gray-200 gap-4\">\r\n            <form onSubmit={handleSearchSubmit} className=\"flex-1 w-full md:max-w-md\">\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={searchInput}\r\n                  onChange={(e) => setSearchInput(e.target.value)}\r\n                  placeholder=\"모임 검색...\"\r\n                  className=\"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                />\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-purple-600\"\r\n                >\r\n                  <i className=\"ri-search-line\"></i>\r\n                </button>\r\n                {searchInput && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSearchInput('');\r\n                      setSearchQuery('');\r\n                      setCurrentPage(1);\r\n                      setActivities([]);\r\n                    }}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    <i className=\"ri-close-circle-line\"></i>\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n\r\n            <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm text-gray-600\">정렬:</span>\r\n                <select\r\n                  value={sortBy}\r\n                  onChange={(e) => handleSortChange(e.target.value)}\r\n                  className=\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent cursor-pointer\"\r\n                >\r\n                  <option value=\"latest\">최신순</option>\r\n                  <option value=\"oldest\">오래된순</option>\r\n                  <option value=\"date-asc\">모임 날짜 빠른순</option>\r\n                  <option value=\"date-desc\">모임 날짜 늦은순</option>\r\n                </select>\r\n              </div>\r\n\r\n              <Link\r\n                href=\"/create-activity\"\r\n                onClick={handleCreateActivity}\r\n                className=\"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors whitespace-nowrap flex items-center gap-2\"\r\n              >\r\n                <i className=\"ri-add-line\"></i>\r\n                모임 만들기\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {activities.length === 0 && !loading ? (\r\n          <div className=\"bg-white rounded-lg shadow-sm p-12 text-center\">\r\n            <p className=\"text-gray-500 text-lg mb-4\">\r\n              {searchQuery\r\n                ? `\"${searchQuery}\" 검색 결과가 없습니다`\r\n                : categoryFilter !== '전체' || locationFilter !== '전국'\r\n                ? '해당 조건의 모임이 없습니다'\r\n                : '아직 생성된 모임이 없습니다'}\r\n            </p>\r\n            {!searchQuery && (\r\n              <Link\r\n                href=\"/create-activity\"\r\n                onClick={handleCreateActivity}\r\n                className=\"inline-block px-6 py-3 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors\"\r\n              >\r\n                첫 모임 만들기\r\n              </Link>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\r\n              {activities.map((activity, index) => {\r\n                const isNewPageStart = isMobile && index > 0 && index % itemsPerPage === 0;\r\n                \r\n                return (\r\n                  <div key={activity.id}>\r\n                    {isNewPageStart && <div ref={newPageMarkerRef} className=\"absolute -mt-20\"></div>}\r\n                    <Link\r\n                      href={`/activities/${activity.id}`}\r\n                      className=\"block bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden cursor-pointer\"\r\n                    >\r\n                      <div className=\"p-6\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <span className=\"px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full\">\r\n                            {activity.category.name}\r\n                          </span>\r\n                          <span className=\"text-xs text-gray-500\">\r\n                            {new Date(activity.createdAt).toLocaleDateString('ko-KR')}\r\n                          </span>\r\n                        </div>\r\n\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-2 line-clamp-1\">\r\n                          {activity.title}\r\n                        </h3>\r\n\r\n                        <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">\r\n                          {activity.description}\r\n                        </p>\r\n\r\n                        <div className=\"space-y-2 mb-4\">\r\n                          <div className=\"flex items-center text-sm text-gray-700\">\r\n                            <i className=\"ri-calendar-line mr-2 text-purple-600\"></i>\r\n                            {activity.date} {activity.time}\r\n                          </div>\r\n                          <div className=\"flex items-center text-sm text-gray-700\">\r\n                            <i className=\"ri-map-pin-line mr-2 text-purple-600\"></i>\r\n                            {activity.location.name} · {activity.address}\r\n                          </div>\r\n                          <div className=\"flex items-center text-sm text-gray-700\">\r\n                            <i className=\"ri-group-line mr-2 text-purple-600\"></i>\r\n                            {activity.participants}/{activity.maxParticipants}명\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded\">\r\n                              {activity.difficultyLevel}\r\n                            </span>\r\n                            <span className=\"text-sm font-semibold text-purple-600\">\r\n                              {activity.price === 0 ? '무료' : `${activity.price.toLocaleString()}원`}\r\n                            </span>\r\n                          </div>\r\n                          <span className=\"text-sm text-purple-600 hover:text-purple-700 font-medium\">\r\n                            모임 상세보기 →\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </Link>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {isMobile && (\r\n              <div ref={observerTarget} className=\"py-8 text-center\">\r\n                {loadingMore && (\r\n                  <div className=\"text-gray-600\">\r\n                    <i className=\"ri-loader-4-line animate-spin text-2xl\"></i>\r\n                    <p className=\"mt-2\">더 불러오는 중...</p>\r\n                  </div>\r\n                )}\r\n                {currentPage >= totalPages && activities.length > 0 && (\r\n                  <p className=\"text-gray-500\">모든 모임을 확인했습니다</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {!isMobile && totalPages > 1 && (\r\n              <div className=\"flex items-center justify-center gap-2\">\r\n                <button\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                  className=\"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <i className=\"ri-arrow-left-s-line\"></i>\r\n                </button>\r\n\r\n                {currentPage > 3 && totalPages > 5 && (\r\n                  <>\r\n                    <button\r\n                      onClick={() => handlePageChange(1)}\r\n                      className=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                    >\r\n                      1\r\n                    </button>\r\n                    <span className=\"px-2 text-gray-500\">...</span>\r\n                  </>\r\n                )}\r\n\r\n                {getPageNumbers().map((page) => (\r\n                  <button\r\n                    key={page}\r\n                    onClick={() => handlePageChange(page)}\r\n                    className={`px-4 py-2 rounded-md transition-colors ${\r\n                      currentPage === page\r\n                        ? 'bg-purple-600 text-white font-semibold'\r\n                        : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    {page}\r\n                  </button>\r\n                ))}\r\n\r\n                {currentPage < totalPages - 2 && totalPages > 5 && (\r\n                  <>\r\n                    <span className=\"px-2 text-gray-500\">...</span>\r\n                    <button\r\n                      onClick={() => handlePageChange(totalPages)}\r\n                      className=\"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                    >\r\n                      {totalPages}\r\n                    </button>\r\n                  </>\r\n                )}\r\n\r\n                <button\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                  className=\"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <i className=\"ri-arrow-right-s-line\"></i>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}