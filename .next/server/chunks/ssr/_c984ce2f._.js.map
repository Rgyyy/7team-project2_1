{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/shared/lib/image-external.tsx","turbopack:///[project]/node_modules/next/image.js","turbopack:///[project]/src/actions/data:3b3344 <text/javascript>","turbopack:///[project]/src/app/login/page.tsx"],"sourcesContent":["import type { ImageConfigComplete, ImageLoaderProps } from './image-config'\nimport type { ImageProps, ImageLoader, StaticImageData } from './get-img-props'\n\nimport { getImgProps } from './get-img-props'\nimport { Image } from '../../client/image-component'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\n\n/**\n * For more advanced use cases, you can call `getImageProps()`\n * to get the props that would be passed to the underlying `<img>` element,\n * and instead pass to them to another component, style, canvas, etc.\n *\n * Read more: [Next.js docs: `getImageProps`](https://nextjs.org/docs/app/api-reference/components/image#getimageprops)\n */\nexport function getImageProps(imgProps: ImageProps) {\n  const { props } = getImgProps(imgProps, {\n    defaultLoader,\n    // This is replaced by webpack define plugin\n    imgConf: process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete,\n  })\n  // Normally we don't care about undefined props because we pass to JSX,\n  // but this exported function could be used by the end user for anything\n  // so we delete undefined props to clean it up a little.\n  for (const [key, value] of Object.entries(props)) {\n    if (value === undefined) {\n      delete props[key as keyof typeof props]\n    }\n  }\n  return { props }\n}\n\nexport default Image\n\nexport type { ImageProps, ImageLoaderProps, ImageLoader, StaticImageData }\n","module.exports = require('./dist/shared/lib/image-external')\n","/* __next_internal_action_entry_do_not_use__ [{\"60876eb385a961da58c42d883e3ace7922d7b1edf5\":\"loginUser\"},\"src/actions/userLogin.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var loginUser=/*#__PURE__*/createServerReference(\"60876eb385a961da58c42d883e3ace7922d7b1edf5\",callServer,void 0,findSourceMapURL,\"loginUser\");","\"use client\";\n\nimport { loginUser } from \"@/actions/userLogin\";\nimport { useActionState, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport Image from \"next/image\";\nimport Link from \"next/link\";\n\nconst initialState = { error: \"\" };\n\nexport default function Login() {\n  const [state, formAction] = useActionState(loginUser, initialState);\n  const [locationInfo, setLocationInfo] = useState<string>(\"\");\n  const [deviceInfo, setDeviceInfo] = useState<string>(\"\");\n  const router = useRouter();\n  const { refreshUser } = useAuth();\n\n  useEffect(() => {\n    // 로그인 성공 시 처리\n    if (state && \"success\" in state && state.success) {\n      refreshUser().then(() => {\n        router.push(\"/\");\n      });\n    }\n  }, [state, router, refreshUser]);\n\n  useEffect(() => {\n    // GPS 정보 수집\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setLocationInfo(`${latitude},${longitude}`);\n        },\n        (error) => {\n          setLocationInfo(\"GPS 비허용\");\n          // console.error(\"Error fetching GPS location:\", error);\n        },\n        {\n          timeout: 10000,\n          enableHighAccuracy: true,\n        }\n      );\n    } else {\n      setLocationInfo(\"GPS 지원 안함\");\n    }\n\n    // 디바이스 정보 수집\n    const platform = navigator.platform || \"Unknown\";\n    const language = navigator.language || \"Unknown\";\n    const cookieEnabled = navigator.cookieEnabled;\n    const screenInfo = `${screen.width}x${screen.height}`;\n    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n    const device = {\n      platform,\n      language,\n      cookieEnabled,\n      screenInfo,\n      timezone,\n      userAgent: navigator.userAgent,\n    };\n\n    setDeviceInfo(JSON.stringify(device));\n  }, []);\n\n  const handleSubmit = (formData: FormData) => {\n    // 클라이언트에서 수집한 정보 추가\n    if (locationInfo) {\n      formData.append(\"gpsLocation\", locationInfo);\n    }\n    if (deviceInfo) {\n      formData.append(\"deviceInfo\", deviceInfo);\n    }\n\n    return formAction(formData);\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <form\n        className=\"border-2 rounded-lg border-purple-600 p-4 m-4 w-full max-w-lg\"\n        action={handleSubmit}\n      >\n        {state.error && (\n          <div className=\"text-red-500 border-1 p-2 border-red-500 bg-red-50 w-full\">\n            {state.error}\n          </div>\n        )}\n        <div className=\"flex flex-col items-center m-4\">\n          <Link href=\"/\">\n            <Image src=\"/img_b.png\" alt=\"Logo\" width={150} height={100} />\n          </Link>\n          <h1 className=\"text-2xl font-bold m-4\">로그인</h1>\n          <input\n            className=\"p-2 border-1 bg-gray-50 focus:bg-gray-200 border-gray-300 rounded-t-lg \"\n            name=\"userId\"\n            type=\"text\"\n            required\n            placeholder=\"ID\"\n          />\n\n          <input\n            className=\"p-2 border-1 bg-gray-50 focus:bg-gray-200 border-gray-300 rounded-b-lg\"\n            name=\"userPassword\"\n            type=\"password\"\n            required\n            placeholder=\"비밀번호\"\n          />\n        </div>\n\n        <input type=\"hidden\" name=\"gpsLocation\" value={locationInfo} />\n        <input type=\"hidden\" name=\"deviceInfo\" value={deviceInfo} />\n\n        <div className=\"flex justify-end\">\n          <button\n            className=\"bg-purple-600 hover:bg-purple-700 active:bg-purple-600 text-white rounded-lg p-2 m-2\"\n            type=\"submit\"\n          >\n            로그인\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":["getImageProps","imgProps","props","getImgProps","defaultLoader","imgConf","process","env","__NEXT_IMAGE_OPTS","key","value","Object","entries","undefined","Image"],"mappings":"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","ignoreList":[0,1]}