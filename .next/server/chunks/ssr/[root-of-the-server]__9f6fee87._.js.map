{"version":3,"sources":["turbopack:///[project]/src/component/ActivityCalendar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\n\ninterface Activity {\n  id: string;\n  title: string;\n  date: string;\n  difficultyLevel: string;\n  participants: number;\n  maxParticipants: number;\n  price: number;\n}\n\ninterface ActivityCalendarProps {\n  activities: Activity[];\n  participations?: Array<{ activity: Activity }>;\n  className?: string;\n}\n\nexport default function ActivityCalendar({\n  activities,\n  participations = [],\n  className = \"\",\n}: ActivityCalendarProps) {\n  const today = new Date();\n  const currentMonth = today.getMonth();\n  const currentYear = today.getFullYear();\n\n  const prevMonth = new Date(currentYear, currentMonth - 1, 1);\n  const thisMonth = new Date(currentYear, currentMonth, 1);\n  const nextMonth = new Date(currentYear, currentMonth + 1, 1);\n\n  // 모달 상태 관리\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedDateActivities, setSelectedDateActivities] = useState<\n    Activity[]\n  >([]);\n  const [selectedDate, setSelectedDate] = useState<string>(\"\");\n\n  // 모든 활동들을 합치기\n  const allActivities = [\n    ...activities,\n    ...participations.map((p) => p.activity),\n  ];\n\n  // 날짜별 활동 매핑\n  const getActivitiesForDate = (date: Date) => {\n    // 타임존 문제 해결을 위해 로컬 날짜 사용\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    const dateString = `${year}-${month}-${day}`;\n    return allActivities.filter((activity) => activity.date === dateString);\n  };\n\n  // 월 이름 가져오기\n  const getMonthName = (date: Date) => {\n    return date.toLocaleDateString(\"ko-KR\", { month: \"long\" });\n  };\n\n  // 해당 월의 날짜들 가져오기\n  const getDaysInMonth = (date: Date) => {\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const firstDayOfWeek = new Date(year, month, 1).getDay();\n\n    const days = [];\n\n    // 빈 공간 채우기\n    for (let i = 0; i < firstDayOfWeek; i++) {\n      days.push(null);\n    }\n\n    // 실제 날짜들\n    for (let day = 1; day <= daysInMonth; day++) {\n      days.push(new Date(year, month, day));\n    }\n\n    return days;\n  };\n\n  const isToday = (date: Date | null) => {\n    if (!date) return false;\n    return (\n      today.getDate() === date.getDate() &&\n      today.getMonth() === date.getMonth() &&\n      today.getFullYear() === date.getFullYear()\n    );\n  };\n\n  // 날짜 클릭 핸들러\n  const handleDateClick = (date: Date, dayActivities: Activity[]) => {\n    if (dayActivities.length === 1) {\n      // 활동이 하나면 바로 이동\n      window.location.href = `/activities/${dayActivities[0].id}`;\n    } else if (dayActivities.length > 1) {\n      // 활동이 여러개면 모달 열기\n      setSelectedDateActivities(dayActivities);\n      setSelectedDate(date.toLocaleDateString(\"ko-KR\"));\n      setIsModalOpen(true);\n    }\n  };\n\n  // 단일 캘린더 컴포넌트\n  const Calendar = ({\n    month,\n    isCurrentMonth = false,\n    isSmall = false,\n  }: {\n    month: Date;\n    isCurrentMonth?: boolean;\n    isSmall?: boolean;\n  }) => {\n    const days = getDaysInMonth(month);\n    const monthName = getMonthName(month);\n\n    return (\n      <div\n        className={`bg-white border border-gray-200 rounded-lg ${\n          isSmall ? \"p-2\" : \"p-3\"\n        } ${isCurrentMonth ? \"shadow-md\" : \"shadow-sm\"}`}\n      >\n        {/* 월 헤더 */}\n        <h3\n          className={`font-bold text-center mb-2 ${\n            isCurrentMonth ? \"text-sm text-blue-600\" : \"text-xs text-gray-700\"\n          }`}\n        >\n          {month.getFullYear()}년 {monthName}\n        </h3>\n\n        {/* 요일 헤더 */}\n        <div className=\"grid grid-cols-7 gap-1 mb-1\">\n          {[\"일\", \"월\", \"화\", \"수\", \"목\", \"금\", \"토\"].map((day) => (\n            <div\n              key={day}\n              className={`text-gray-500 text-center font-medium py-1 ${\n                isSmall ? \"text-xs\" : \"text-xs\"\n              }`}\n            >\n              {day}\n            </div>\n          ))}\n        </div>\n\n        {/* 날짜들 */}\n        <div className=\"grid grid-cols-7 gap-1\">\n          {days.map((date, index) => {\n            if (!date) {\n              return (\n                <div key={index} className={isSmall ? \"h-5\" : \"h-6\"}></div>\n              );\n            }\n\n            const dayActivities = getActivitiesForDate(date);\n            const hasActivities = dayActivities.length > 0;\n\n            return (\n              <div key={index} className=\"relative\">\n                {hasActivities ? (\n                  <button\n                    onClick={() => handleDateClick(date, dayActivities)}\n                    className={`\n                      block w-full rounded text-center font-medium\n                      transition-all duration-200 cursor-pointer flex items-center justify-center\n                      ${isSmall ? \"h-5 text-xs\" : \"h-6 text-xs\"}\n                      ${\n                        isToday(date)\n                          ? \"bg-red-400 text-white ring-1 ring-blue-400 hover:bg-red-500\"\n                          : \"bg-red-300 text-white hover:bg-red-400\"\n                      }\n                    `}\n                    title={`${dayActivities.map((a) => a.title).join(\", \")}`}\n                  >\n                    {date.getDate()}\n                  </button>\n                ) : (\n                  <div\n                    className={`\n                      w-full rounded text-center\n                      flex items-center justify-center\n                      ${isSmall ? \"h-5 text-xs\" : \"h-6 text-xs\"}\n                      ${\n                        isToday(date)\n                          ? \"bg-blue-500 text-white font-bold\"\n                          : \"text-gray-700 hover:bg-gray-100 cursor-pointer\"\n                      }\n                    `}\n                  >\n                    {date.getDate()}\n                  </div>\n                )}\n\n                {/* 활동 개수 표시 */}\n                {hasActivities && dayActivities.length > 1 && (\n                  <div\n                    className={`absolute -top-1 -right-1 bg-yellow-400 rounded-full flex items-center justify-center font-bold text-black ${\n                      isSmall ? \"text-xs w-3 h-3\" : \"text-xs w-3 h-3\"\n                    }`}\n                  >\n                    {dayActivities.length}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className={`space-y-3 ${className}`}>\n        <Calendar month={thisMonth} isCurrentMonth={true} />\n\n        <div className=\"grid grid-cols-2 gap-2\">\n          <Calendar month={prevMonth} isSmall={true} />\n          <Calendar month={nextMonth} isSmall={true} />\n        </div>\n\n        {/* 활동 범례 */}\n        <div className=\"bg-gray-50 rounded-lg p-2\">\n          <div className=\"text-xs text-gray-600 flex items-center justify-center space-x-4\">\n            <div className=\"flex items-center\">\n              <div className=\"w-2 h-2 bg-red-300 rounded mr-1\"></div>\n              <span>모임</span>\n            </div>\n            <div className=\"flex items-center\">\n              <div className=\"w-2 h-2 bg-blue-500 rounded mr-1\"></div>\n              <span>오늘</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 활동 선택 모달 */}\n      {isModalOpen && (\n        <div className=\"fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-96 overflow-y-auto shadow-xl\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-bold text-gray-800\">\n                {selectedDate} 활동 목록\n              </h3>\n              <button\n                onClick={() => setIsModalOpen(false)}\n                className=\"text-gray-500 hover:text-gray-700 text-xl font-bold cursor-pointer hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-colors\"\n              >\n                ×\n              </button>\n            </div>\n\n            <div className=\"space-y-3\">\n              {selectedDateActivities.map((activity, index) => (\n                <div\n                  key={activity.id}\n                  className=\"border border-gray-200 rounded-lg p-3 hover:bg-gray-50\"\n                >\n                  <Link\n                    href={`/activities/${activity.id}`}\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"block\"\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-800 hover:text-blue-600\">\n                          {activity.title}\n                        </h4>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <span\n                            className={`px-2 py-1 rounded text-xs ${\n                              activity.difficultyLevel === \"초급\"\n                                ? \"bg-blue-100 text-blue-800\"\n                                : activity.difficultyLevel === \"중급\"\n                                ? \"bg-yellow-100 text-yellow-800\"\n                                : \"bg-red-100 text-red-800\"\n                            }`}\n                          >\n                            {activity.difficultyLevel}\n                          </span>\n                          <span className=\"text-xs text-gray-500\">\n                            {activity.participants}/{activity.maxParticipants}명\n                          </span>\n                          <span className=\"text-xs text-gray-500\">\n                            {activity.price.toLocaleString()}원\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"text-gray-400\">→</div>\n                    </div>\n                  </Link>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"mt-4 text-center\">\n              <button\n                onClick={() => setIsModalOpen(false)}\n                className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\n              >\n                닫기\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}