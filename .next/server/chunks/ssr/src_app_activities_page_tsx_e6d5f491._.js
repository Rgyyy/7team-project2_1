module.exports=[81523,a=>{"use strict";a.s(["default",()=>f]);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944);function f(){let a=(0,e.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)("전체"),[l,m]=(0,c.useState)("전국"),[n,o]=(0,c.useState)("latest"),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(0),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),F=(0,c.useRef)(null),G=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=()=>{w(window.innerWidth<768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/current-user");if(a.ok){let b=await a.json();b.userId&&E(b.userId)}}catch(a){console.error("Error checking user:",a)}})()},[]),(0,c.useEffect)(()=>{H(p>1&&v)},[p,j,l,n,z]),(0,c.useEffect)(()=>{1===p&&g([])},[j,l,n,z]);let H=async a=>{a?y(!0):i(!0);try{let b=new URLSearchParams({page:p.toString(),limit:"9",sortBy:n});"전체"!==j&&b.append("category",j),"전국"!==l&&b.append("location",l),z.trim()&&b.append("search",z.trim());let c=await fetch(`/api/activities?${b.toString()}`),d=await c.json();d.activities&&Array.isArray(d.activities)?(v&&a&&p>1?(g(a=>[...a,...d.activities]),setTimeout(()=>{G.current&&G.current.scrollIntoView({behavior:"smooth",block:"start"})},150)):g(d.activities),s(d.totalPages||1),u(d.totalCount||0)):g([])}catch(a){console.error("Error fetching activities:",a),g([])}finally{i(!1),y(!1)}};(0,c.useEffect)(()=>{if(!v)return;let a=new IntersectionObserver(a=>{a[0].isIntersecting&&!x&&p<r&&q(a=>a+1)},{threshold:.1}),b=F.current;return b&&a.observe(b),()=>{b&&a.unobserve(b)}},[v,x,p,r]);let I=a=>{q(a),window.scrollTo({top:0,behavior:"smooth"})},J=a=>{m(a),q(1),g([])},K=b=>{D||(b.preventDefault(),alert("로그인이 필요합니다."),a.push("/login"))};return h&&0===f.length?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-xl text-gray-600",children:"로딩 중..."})}):(0,b.jsx)("div",{className:"bg-gray-50 min-h-screen py-12",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"모임 게시판"}),(0,b.jsxs)("p",{className:"text-gray-600",children:["다양한 취미 활동 모임을 찾아보세요",t>0&&(0,b.jsxs)("span",{className:"ml-2 text-purple-600 font-medium",children:["(총 ",t,"개)"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"취미 카테고리"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["전체","운동","요리","독서","사진","음악","미술","언어","게임","여행","그외"].map(a=>(0,b.jsx)("button",{onClick:()=>{k(a),q(1),g([])},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${j===a?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a},a))})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"원하는 지역"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[["전국","서울","인천","대전","대구","광주","울산","부산","세종"].map(a=>(0,b.jsx)("button",{onClick:()=>J(a),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${l===a?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a},a)),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-2",children:["경기도","강원도","충청북도","충청남도","전라북도","전라남도","경상북도","경상남도","제주도"].map(a=>(0,b.jsx)("button",{onClick:()=>J(a),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${l===a?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between pt-4 border-t border-gray-200 gap-4",children:[(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),A(B),q(1),g([])},className:"flex-1 w-full md:max-w-md",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:B,onChange:a=>C(a.target.value),placeholder:"모임 검색...",className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,b.jsx)("button",{type:"submit",className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-purple-600",children:(0,b.jsx)("i",{className:"ri-search-line"})}),B&&(0,b.jsx)("button",{type:"button",onClick:()=>{C(""),A(""),q(1),g([])},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"ri-close-circle-line"})})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"정렬:"}),(0,b.jsxs)("select",{value:n,onChange:a=>{o(a.target.value),q(1),g([])},className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent cursor-pointer",children:[(0,b.jsx)("option",{value:"latest",children:"최신순"}),(0,b.jsx)("option",{value:"oldest",children:"오래된순"}),(0,b.jsx)("option",{value:"date-asc",children:"모임 날짜 빠른순"}),(0,b.jsx)("option",{value:"date-desc",children:"모임 날짜 늦은순"})]})]}),(0,b.jsxs)(d.default,{href:"/create-activity",onClick:K,className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors whitespace-nowrap flex items-center gap-2",children:[(0,b.jsx)("i",{className:"ri-add-line"}),"모임 만들기"]})]})]})]}),0!==f.length||h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:f.map((a,c)=>{let e=v&&c>0&&c%9==0;return(0,b.jsxs)("div",{children:[e&&(0,b.jsx)("div",{ref:G,className:"absolute -mt-20"}),(0,b.jsx)(d.default,{href:`/activities/${a.id}`,className:"block bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden cursor-pointer",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:a.category.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString("ko-KR")})]}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,b.jsx)("i",{className:"ri-calendar-line mr-2 text-purple-600"}),a.date," ",a.time]}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,b.jsx)("i",{className:"ri-map-pin-line mr-2 text-purple-600"}),a.location.name," · ",a.address]}),(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,b.jsx)("i",{className:"ri-group-line mr-2 text-purple-600"}),a.participants,"/",a.maxParticipants,"명"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:a.difficultyLevel}),(0,b.jsx)("span",{className:"text-sm font-semibold text-purple-600",children:0===a.price?"무료":`${a.price.toLocaleString()}원`})]}),(0,b.jsx)("span",{className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"모임 상세보기 →"})]})]})})]},a.id)})}),v&&(0,b.jsxs)("div",{ref:F,className:"py-8 text-center",children:[x&&(0,b.jsxs)("div",{className:"text-gray-600",children:[(0,b.jsx)("i",{className:"ri-loader-4-line animate-spin text-2xl"}),(0,b.jsx)("p",{className:"mt-2",children:"더 불러오는 중..."})]}),p>=r&&f.length>0&&(0,b.jsx)("p",{className:"text-gray-500",children:"모든 모임을 확인했습니다"})]}),!v&&r>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>I(p-1),disabled:1===p,className:"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,b.jsx)("i",{className:"ri-arrow-left-s-line"})}),p>3&&r>5&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>I(1),className:"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"1"}),(0,b.jsx)("span",{className:"px-2 text-gray-500",children:"..."})]}),(()=>{let a=[];if(r<=5)for(let b=1;b<=r;b++)a.push(b);else if(p<=3)for(let b=1;b<=5;b++)a.push(b);else if(p>=r-2)for(let b=r-5+1;b<=r;b++)a.push(b);else for(let b=p-2;b<=p+2;b++)a.push(b);return a})().map(a=>(0,b.jsx)("button",{onClick:()=>I(a),className:`px-4 py-2 rounded-md transition-colors ${p===a?"bg-purple-600 text-white font-semibold":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:a},a)),p<r-2&&r>5&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,b.jsx)("button",{onClick:()=>I(r),className:"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:r})]}),(0,b.jsx)("button",{onClick:()=>I(p+1),disabled:p===r,className:"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,b.jsx)("i",{className:"ri-arrow-right-s-line"})})]})]}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,b.jsx)("p",{className:"text-gray-500 text-lg mb-4",children:z?`"${z}" 검색 결과가 없습니다`:"전체"!==j||"전국"!==l?"해당 조건의 모임이 없습니다":"아직 생성된 모임이 없습니다"}),!z&&(0,b.jsx)(d.default,{href:"/create-activity",onClick:K,className:"inline-block px-6 py-3 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"첫 모임 만들기"})]})]})})}}];

//# sourceMappingURL=src_app_activities_page_tsx_e6d5f491._.js.map