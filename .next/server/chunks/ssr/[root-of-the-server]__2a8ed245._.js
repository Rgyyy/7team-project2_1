module.exports=[29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},88853,a=>{"use strict";a.s(["default",()=>h],88853);var b=a.i(87924),c=a.i(72131),d=a.i(5050),e=(0,d.createServerReference)("70bc364ec1ed1484b059a9ac4142c6fdf9da546c77",d.callServer,void 0,d.findSourceMapURL,"createPost"),f=a.i(29173),g=a.i(50944);function h({activityId:a}){(0,g.useRouter)();let[d,h]=(0,c.useTransition)(),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),u=async b=>{b.preventDefault(),t("");let c=new FormData(b.currentTarget);if(i&&!o){n(!0),r("");try{let a=new FormData;a.append("file",i);let b=await fetch("/api/upload",{method:"POST",body:a});if(!b.ok)throw Error("ì—…ë¡œë“œ ì‹¤íŒ¨");let d=await b.json();p(d.url),c.append("imageUrl",d.url)}catch(a){r("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),console.error(a),n(!1);return}finally{n(!1)}}else o&&c.append("imageUrl",o);h(async()=>{try{let b=await e(a,null,c);b?.error&&t(b.error)}catch(a){console.error(a),t("ê²Œì‹œê¸€ ì‘ì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤")}})};return(0,b.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"ê²Œì‹œê¸€ ì‘ì„±"}),(0,b.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"ì¹´í…Œê³ ë¦¬"}),(0,b.jsxs)("select",{name:"category",className:"w-full px-4 py-2 border rounded-lg",required:!0,children:[(0,b.jsx)("option",{value:"",children:"ì„ íƒí•˜ì„¸ìš”"}),(0,b.jsx)("option",{value:f.MoimPostCat.ëª¨ì„í›„ê¸°,children:"ğŸ“¸ ëª¨ì„í›„ê¸°"}),(0,b.jsx)("option",{value:f.MoimPostCat.ê°€ì…ì¸ì‚¬,children:"ğŸ‘‹ ê°€ì…ì¸ì‚¬"}),(0,b.jsx)("option",{value:f.MoimPostCat.ììœ ,children:"ğŸ’¬ ììœ "}),(0,b.jsx)("option",{value:f.MoimPostCat.ê³µì§€,children:"ğŸ“¢ ê³µì§€"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"ì œëª©"}),(0,b.jsx)("input",{type:"text",name:"title",className:"w-full px-4 py-2 border rounded-lg",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"ì´ë¯¸ì§€ ì²¨ë¶€ (ì„ íƒ)"}),(0,b.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:k?(0,b.jsxs)("div",{children:[(0,b.jsx)("img",{src:k,alt:"ë¯¸ë¦¬ë³´ê¸°",className:"max-h-64 mx-auto rounded"}),i&&(0,b.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[(0,b.jsxs)("p",{children:["íŒŒì¼ëª…: ",i.name]}),(0,b.jsxs)("p",{children:["í¬ê¸°: ",(i.size/1024).toFixed(2)," KB"]})]}),(0,b.jsx)("div",{className:"mt-4 flex gap-2 justify-center",children:(0,b.jsx)("button",{type:"button",onClick:()=>{j(null),l(""),p(""),r("")},className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"ì´ë¯¸ì§€ ì œê±°"})})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,b.jsxs)("label",{className:"cursor-pointer",children:[(0,b.jsx)("span",{className:"text-blue-500 hover:text-blue-600 font-medium",children:"íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”"}),(0,b.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(!b)return;if(b.size>5242880)return void r("íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤");if(!b.type.startsWith("image/"))return void r("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤");r(""),j(b);let c=new FileReader;c.onloadend=()=>{l(c.result)},c.readAsDataURL(b)}})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, GIF (ìµœëŒ€ 5MB)"})]})}),q&&(0,b.jsx)("div",{className:"mt-2 p-3 bg-red-100 text-red-700 rounded text-sm",children:q}),o&&(0,b.jsxs)("div",{className:"mt-2 p-4 bg-green-100 rounded",children:[(0,b.jsx)("p",{className:"text-green-700 font-medium mb-2",children:"ì—…ë¡œë“œ ì™„ë£Œ!"}),(0,b.jsx)("img",{src:o,alt:"ì—…ë¡œë“œëœ ì´ë¯¸ì§€",className:"mt-2 max-h-32 rounded"})]}),m&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,b.jsx)("div",{className:"bg-blue-500 h-2 rounded-full animate-pulse",style:{width:"70%"}})}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘..."})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"ë‚´ìš©"}),(0,b.jsx)("textarea",{name:"content",rows:10,className:"w-full px-4 py-2 border rounded-lg",required:!0})]}),s&&(0,b.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded",children:s}),(0,b.jsx)("button",{type:"submit",disabled:m||d,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium disabled:bg-gray-400 disabled:cursor-not-allowed",children:m?"ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘...":d?"ì‘ì„± ì¤‘...":"ì‘ì„±í•˜ê¸°"})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2a8ed245._.js.map