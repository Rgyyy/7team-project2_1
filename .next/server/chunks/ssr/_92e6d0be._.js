module.exports=[33095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(c,{default:function(){return i},getImageProps:function(){return h}});let d=a.r(33354),e=a.r(94915),f=a.r(67161),g=d._(a.r(2305));function h(a){let{props:b}=(0,e.getImgProps)(a,{defaultLoader:g.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let i=f.Image},71987,(a,b,c)=>{b.exports=a.r(33095)},25571,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(71987);function g({params:a}){let g=(0,e.useRouter)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),x=(0,c.useRef)(null);(0,c.useEffect)(()=>{(async()=>{k((await a).id)})()},[a]),(0,c.useEffect)(()=>{j&&(y(),z())},[j]);let y=async()=>{try{let a=await fetch("/api/auth/current-user"),b=await a.json();b&&b.userId&&m(b.userId)}catch(a){console.error("Error checking current user:",a)}},z=async()=>{try{let a=await fetch(`/api/activities/${j}/participation`),b=await a.json();o(b.isParticipating),b.isParticipating&&A()}catch(a){console.error("Error checking participation:",a)}finally{q(!1)}},A=async()=>{try{let a=await fetch(`/api/activities/${j}/posts?limit=10`);if(a.ok){let b=await a.json();i(b.posts||b),u(b.nextCursor||null),w(void 0!==b.hasMore?b.hasMore:10===b.length)}else console.error("Failed to fetch posts")}catch(a){console.error("Error fetching posts:",a)}},B=(0,c.useCallback)(async()=>{if(v&&!r&&t){s(!0);try{let a=await fetch(`/api/activities/${j}/posts?limit=10&cursor=${t}`);if(a.ok){let b=await a.json();i(a=>[...a,...b.posts||b]),u(b.nextCursor||null),w(void 0!==b.hasMore?b.hasMore:10===b.length)}}catch(a){console.error("Error loading more posts:",a)}finally{s(!1)}}},[v,r,t,j]);return((0,c.useEffect)(()=>{let a=new IntersectionObserver(a=>{a[0].isIntersecting&&v&&!r&&B()},{threshold:.1}),b=x.current;return b&&a.observe(b),()=>{b&&a.unobserve(b)}},[v,r,B]),p)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen text-gray-600",children:"로딩 중..."}):l?n?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"게시글 목록"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"활동 게시판"})]}),0===h.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"게시글이 없습니다."}),(0,b.jsx)("p",{className:"text-gray-400 mt-2",children:"첫 번째 게시글을 작성해보세요!"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"space-y-4",children:h.map(a=>(0,b.jsx)(d.default,{href:`/activities/${j}/posts/${a.id}`,className:"block",children:(0,b.jsxs)("article",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6 h-52 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex gap-4 flex-1 min-h-0",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a.moimPostCat})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 hover:text-blue-600 transition-colors mb-2 line-clamp-1",children:a.moimPostTitle}),(0,b.jsx)("p",{className:"text-gray-600 line-clamp-3 flex-1",children:a.moimPostContent})]}),a.image&&(0,b.jsx)("div",{className:"w-32 h-32 flex-shrink-0",children:(0,b.jsx)("div",{className:"relative w-full h-full rounded-lg overflow-hidden",children:(0,b.jsx)(f.default,{src:a.image,alt:a.moimPostTitle,fill:!0,sizes:"128px",style:{objectFit:"cover"},priority:!0})})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 mt-4 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,b.jsx)("span",{className:"font-medium",children:a.user.user_id})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("time",{children:new Date(a.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,b.jsx)("span",{className:"font-medium",children:a._count.likes})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,b.jsx)("span",{className:"font-medium",children:a._count.comments})]})]})]})]})},a.id))}),(0,b.jsxs)("div",{ref:x,className:"mt-8 flex justify-center py-4",children:[r&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,b.jsxs)("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{children:"로딩 중..."})]}),!v&&h.length>0&&(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"모든 게시글을 불러왔습니다."})]})]}),n&&(0,b.jsxs)(d.default,{href:`/activities/${j}/posts/new`,className:"fixed bottom-8 right-8 md:right-auto md:left-[calc(50%+272px)] bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 md:px-8 md:py-4 rounded-full shadow-lg hover:shadow-xl transition-all flex items-center gap-2 group",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"글 작성"]})]})}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-700",children:[(0,b.jsx)("p",{className:"mb-4",children:"이 모임의 참가자만 게시판을 볼 수 있습니다."}),(0,b.jsx)("button",{onClick:()=>g.push(`/activities/${j}`),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"모임 페이지로 돌아가기"})]}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-gray-700",children:[(0,b.jsx)("p",{className:"mb-4",children:"로그인이 필요한 페이지입니다."}),(0,b.jsx)("button",{onClick:()=>g.push("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"로그인하러 가기"})]})}}];

//# sourceMappingURL=_92e6d0be._.js.map