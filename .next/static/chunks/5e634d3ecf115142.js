(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47501,e=>{"use strict";e.s(["default",()=>l]);var t=e.i(43476),s=e.i(71645),r=e.i(22016),a=e.i(18566);function l(){let e=(0,a.useRouter)(),[l,i]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0),[o,d]=(0,s.useState)("전체"),[x,m]=(0,s.useState)("전국"),[p,u]=(0,s.useState)("latest"),[h,g]=(0,s.useState)(1),[b,f]=(0,s.useState)(1),[y,j]=(0,s.useState)(0),[v,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[k,C]=(0,s.useState)(""),[E,R]=(0,s.useState)(""),[L,T]=(0,s.useState)(null),A=(0,s.useRef)(null),I=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=()=>{N(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/current-user");if(e.ok){let t=await e.json();t.userId&&T(t.userId)}}catch(e){console.error("Error checking user:",e)}})()},[]),(0,s.useEffect)(()=>{P(h>1&&v)},[h,o,x,p,k]),(0,s.useEffect)(()=>{1===h&&i([])},[o,x,p,k]);let P=async e=>{e?S(!0):c(!0);try{let t=new URLSearchParams({page:h.toString(),limit:"9",sortBy:p});"전체"!==o&&t.append("category",o),"전국"!==x&&t.append("location",x),k.trim()&&t.append("search",k.trim());let s=await fetch("/api/activities?".concat(t.toString())),r=await s.json();r.activities&&Array.isArray(r.activities)?(v&&e&&h>1?(i(e=>[...e,...r.activities]),setTimeout(()=>{I.current&&I.current.scrollIntoView({behavior:"smooth",block:"start"})},150)):i(r.activities),f(r.totalPages||1),j(r.totalCount||0)):i([])}catch(e){console.error("Error fetching activities:",e),i([])}finally{c(!1),S(!1)}};(0,s.useEffect)(()=>{if(!v)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&!w&&h<b&&g(e=>e+1)},{threshold:.1}),t=A.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[v,w,h,b]);let D=e=>{g(e),window.scrollTo({top:0,behavior:"smooth"})},B=e=>{m(e),g(1),i([])},F=t=>{L||(t.preventDefault(),alert("로그인이 필요합니다."),e.push("/login"))};return n&&0===l.length?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-xl text-gray-600",children:"로딩 중..."})}):(0,t.jsx)("div",{className:"bg-gray-50 min-h-screen py-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"모임 게시판"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["다양한 취미 활동 모임을 찾아보세요",y>0&&(0,t.jsxs)("span",{className:"ml-2 text-purple-600 font-medium",children:["(총 ",y,"개)"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"취미 카테고리"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["전체","운동","요리","독서","사진","음악","미술","언어","게임","여행","그외"].map(e=>(0,t.jsx)("button",{onClick:()=>{d(e),g(1),i([])},className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(o===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"원하는 지역"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[["전국","서울","인천","대전","대구","광주","울산","부산","세종"].map(e=>(0,t.jsx)("button",{onClick:()=>B(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(x===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e)),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-2",children:["경기도","강원도","충청북도","충청남도","전라북도","전라남도","경상북도","경상남도","제주도"].map(e=>(0,t.jsx)("button",{onClick:()=>B(e),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(x===e?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between pt-4 border-t border-gray-200 gap-4",children:[(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),C(E),g(1),i([])},className:"flex-1 w-full md:max-w-md",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:E,onChange:e=>R(e.target.value),placeholder:"모임 검색...",className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,t.jsx)("button",{type:"submit",className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-purple-600",children:(0,t.jsx)("i",{className:"ri-search-line"})}),E&&(0,t.jsx)("button",{type:"button",onClick:()=>{R(""),C(""),g(1),i([])},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"ri-close-circle-line"})})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"정렬:"}),(0,t.jsxs)("select",{value:p,onChange:e=>{u(e.target.value),g(1),i([])},className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent cursor-pointer",children:[(0,t.jsx)("option",{value:"latest",children:"최신순"}),(0,t.jsx)("option",{value:"oldest",children:"오래된순"}),(0,t.jsx)("option",{value:"date-asc",children:"모임 날짜 빠른순"}),(0,t.jsx)("option",{value:"date-desc",children:"모임 날짜 늦은순"})]})]}),(0,t.jsxs)(r.default,{href:"/create-activity",onClick:F,className:"px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors whitespace-nowrap flex items-center gap-2",children:[(0,t.jsx)("i",{className:"ri-add-line"}),"모임 만들기"]})]})]})]}),0!==l.length||n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:l.map((e,s)=>{let a=v&&s>0&&s%9==0;return(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("div",{ref:I,className:"absolute -mt-20"}),(0,t.jsx)(r.default,{href:"/activities/".concat(e.id),className:"block bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden cursor-pointer",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:e.category.name}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 line-clamp-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,t.jsx)("i",{className:"ri-calendar-line mr-2 text-purple-600"}),e.date," ",e.time]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,t.jsx)("i",{className:"ri-map-pin-line mr-2 text-purple-600"}),e.location.name," · ",e.address]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-700",children:[(0,t.jsx)("i",{className:"ri-group-line mr-2 text-purple-600"}),e.participants,"/",e.maxParticipants,"명"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e.difficultyLevel}),(0,t.jsx)("span",{className:"text-sm font-semibold text-purple-600",children:0===e.price?"무료":"".concat(e.price.toLocaleString(),"원")})]}),(0,t.jsx)("span",{className:"text-sm text-purple-600 hover:text-purple-700 font-medium",children:"모임 상세보기 →"})]})]})})]},e.id)})}),v&&(0,t.jsxs)("div",{ref:A,className:"py-8 text-center",children:[w&&(0,t.jsxs)("div",{className:"text-gray-600",children:[(0,t.jsx)("i",{className:"ri-loader-4-line animate-spin text-2xl"}),(0,t.jsx)("p",{className:"mt-2",children:"더 불러오는 중..."})]}),h>=b&&l.length>0&&(0,t.jsx)("p",{className:"text-gray-500",children:"모든 모임을 확인했습니다"})]}),!v&&b>1&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>D(h-1),disabled:1===h,className:"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)("i",{className:"ri-arrow-left-s-line"})}),h>3&&b>5&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>D(1),className:"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"1"}),(0,t.jsx)("span",{className:"px-2 text-gray-500",children:"..."})]}),(()=>{let e=[];if(b<=5)for(let t=1;t<=b;t++)e.push(t);else if(h<=3)for(let t=1;t<=5;t++)e.push(t);else if(h>=b-2)for(let t=b-5+1;t<=b;t++)e.push(t);else for(let t=h-2;t<=h+2;t++)e.push(t);return e})().map(e=>(0,t.jsx)("button",{onClick:()=>D(e),className:"px-4 py-2 rounded-md transition-colors ".concat(h===e?"bg-purple-600 text-white font-semibold":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:e},e)),h<b-2&&b>5&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,t.jsx)("button",{onClick:()=>D(b),className:"px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:b})]}),(0,t.jsx)("button",{onClick:()=>D(h+1),disabled:h===b,className:"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)("i",{className:"ri-arrow-right-s-line"})})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,t.jsx)("p",{className:"text-gray-500 text-lg mb-4",children:k?'"'.concat(k,'" 검색 결과가 없습니다'):"전체"!==o||"전국"!==x?"해당 조건의 모임이 없습니다":"아직 생성된 모임이 없습니다"}),!k&&(0,t.jsx)(r.default,{href:"/create-activity",onClick:F,className:"inline-block px-6 py-3 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"첫 모임 만들기"})]})]})})}}]);